<!-- company-additional-info.component.html -->
<div class="additional-info-container" *ngIf="company">
    <!-- Loading indicator -->
    <div *ngIf="loading" class="loading-overlay">
      <mat-spinner diameter="40"></mat-spinner>
    </div>
  
    <!-- Financial Size Section -->
    <mat-card class="mat-elevation-z1 mb-4">
      <mat-card-content>
        <div class="grid grid-cols-2 gap-4">
        <div class="d-flex align-items-center mb-4">
          <div class="d-flex align-items-center">
            <mat-form-field appearance="outline">
                <mat-label>{{ 'COMPANY_DETAIL.INSURED_INFO.FINANCIAL_SIZE.TITLE' | transloco }}</mat-label>
                <mat-select 
                [(ngModel)]="selectedFinancialSize" 
                name="financialSize"
                (selectionChange)="onFinancialSizeChange()">
                <mat-option *ngFor="let size of financialSizes" [value]="size.codeNumber">
                  {{ size.codeShortDescription }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
  
        <!-- Status Section -->
        <div class="d-flex justify-content-between align-items-center mb-4 border-top pt-4">
          <div class="d-flex align-items-center">
            <mat-form-field appearance="outline">
              <mat-label>{{ 'COMPANY_DETAIL.INSURED_INFO.STATUS.TITLE' | transloco }}</mat-label>
              <mat-select 
                [(ngModel)]="selectedStatus" 
                name="insuredStatus"
                (selectionChange)="onStatusChange()">
                <mat-option *ngFor="let status of companyStatuses" [value]="status.codeNumber">
                  {{ status.codeShortDescription }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
    </div>
        <div class="info-box mat-elevation-z0 bg-light p-3 rounded">
          <h4 class="mat-subtitle-2 text-primary mb-2">{{ 'COMPANY_DETAIL.INSURED_INFO.FINANCIAL_SIZE.INFO_TITLE' | transloco }}</h4>
          <p class="mat-body-2">
            {{ 'COMPANY_DETAIL.INSURED_INFO.FINANCIAL_SIZE.INFO_TEXT' | transloco }}
          </p>
          <ul class="mt-2 financial-size-info">
            <!-- Dynamic financial size descriptions from general codes -->
            <ng-container *ngFor="let size of financialSizes">
              <li class="d-flex align-items-center">
                <span class="size-indicator" [ngClass]="size.codeShortDescription.toLowerCase()"></span>
                <span><strong>{{ size.codeLongDescription }}</strong>: {{ size.codeShortDescription }}</span>
              </li>
            </ng-container>
          </ul>
        </div>
      </mat-card-content>
    </mat-card>
    
    <!-- Employee Assignment Section - Now using the new component -->
    <mat-card class="mat-elevation-z1">
      <mat-card-content>
        <app-assignments-list [company]="company"></app-assignments-list>
      </mat-card-content>
    </mat-card>
  </div>