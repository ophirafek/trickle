<!-- leads.component.html -->
<div class="p-4">
    <div class="d-flex justify-content-between mb-4">
      <h3 class="section-title">Sales Leads</h3>
      <button mat-flat-button color="primary" (click)="createLead()">
        <mat-icon>add</mat-icon>
        <span class="ms-1">Add Lead</span>
      </button>
    </div>
    
    <div class="table-container">
      <table mat-table [dataSource]="leads" class="w-100">
        
        <!-- Lead Number Column -->
        <ng-container matColumnDef="leadNumber">
          <th mat-header-cell *matHeaderCellDef> Lead Number </th>
          <td mat-cell *matCellDef="let lead"> {{ lead.leadNumber }} </td>
        </ng-container>
        
        <!-- Lead Name Column -->
        <ng-container matColumnDef="leadName">
          <th mat-header-cell *matHeaderCellDef> Lead Name </th>
          <td mat-cell *matCellDef="let lead" class="fw-medium"> {{ lead.leadName }} </td>
        </ng-container>
        
        <!-- Lead Type Column -->
        <ng-container matColumnDef="leadType">
          <th mat-header-cell *matHeaderCellDef> Lead Type </th>
          <td mat-cell *matCellDef="let lead"> {{ lead.leadType }} </td>
        </ng-container>
        
        <!-- Status Column -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef> Status </th>
          <td mat-cell *matCellDef="let lead">
            <span class="badge" [ngClass]="{
              'open-badge': lead.status === 'Open',
              'progress-badge': lead.status === 'In Progress',
              'closed-badge': lead.status === 'Closed'
            }">
              {{ lead.status }}
            </span>
          </td>
        </ng-container>
        
        <!-- Sales Gap Value Column -->
        <ng-container matColumnDef="salesGapValue">
          <th mat-header-cell *matHeaderCellDef> Sales Gap Value </th>
          <td mat-cell *matCellDef="let lead"> {{ lead.salesGapValue }} </td>
        </ng-container>
        
        <!-- Probability Column -->
        <ng-container matColumnDef="probability">
          <th mat-header-cell *matHeaderCellDef> Probability </th>
          <td mat-cell *matCellDef="let lead"> {{ lead.probability }} </td>
        </ng-container>
        
        <!-- Market Column -->
        <ng-container matColumnDef="market">
          <th mat-header-cell *matHeaderCellDef> Market </th>
          <td mat-cell *matCellDef="let lead"> {{ lead.market }} </td>
        </ng-container>
        
        <!-- Contact Person Column -->
        <ng-container matColumnDef="contactPerson">
          <th mat-header-cell *matHeaderCellDef> Contact </th>
          <td mat-cell *matCellDef="let lead"> {{ lead.contactPerson }} </td>
        </ng-container>
        
        <!-- Owner Column -->
        <ng-container matColumnDef="owner">
          <th mat-header-cell *matHeaderCellDef> Owner </th>
          <td mat-cell *matCellDef="let lead"> {{ lead.owner }} </td>
        </ng-container>
        
        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef> Actions </th>
          <td mat-cell *matCellDef="let lead">
            <div class="action-buttons">
              <button mat-icon-button color="primary" (click)="editLead(lead)">
                <mat-icon>edit</mat-icon>
              </button>
              <button mat-icon-button color="warn" (click)="deleteLead(lead.id)">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </td>
        </ng-container>
  
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover-row"></tr>
      </table>
      
      <!-- No Leads Message -->
      <div *ngIf="leads.length === 0" class="text-center py-5">
        <p class="text-muted">No leads found for this company.</p>
        <button mat-button color="primary" (click)="createLead()">
          Create a new lead
        </button>
      </div>
    </div>
  </div>